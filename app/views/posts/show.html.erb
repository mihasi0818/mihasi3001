<%= link_to "一覧に戻る", posts_path, class: "back-link" %>


<% if @post %>
  <p>likeの数: <%= @post.likes_count %></p>
<% else %>
  <p>投稿が見つかりませんでした</p>
<% end %>

<%= render 'likes/like', post: @post %>
<tr class="fade-in">

  <td class="user-info">
    <p><% if current_user %><%= current_user.name %>の投稿<% else %>ログアウト中<% end %></p>
  </td>
  <h3>内容</h3>
  <div class="comment3">
  <td class="post-info">
  <span class="comment"> <p><%= sanitize(@post.content) %></p></span>
   

  </td>
  

</tr>
</div>
<main>
  <tr class="fade-info">
    <td class="disadvantage">
      <div class="image">
       <div>
         <%= @post.image_url3.present? ? image_tag(@post.image_url3, size: "80x80") : '' %>
       </div>
       
       <% if @post.image_url33.present? %>
         <%= image_tag(@post.image_url33, size: "80x80") %>
       <% end %>
       
       <% if @post.image_url34.present? %>
         <%= image_tag(@post.image_url34, size: "80x80") %>
       <% end %>
       
      </div>
      <h2>不利(disadvantage)</h2>

    </td>
  </tr>

  <tr class="fade-info">
    <td class="advantage">

      <div class="image">
        <div>
          <%= @post.image_url2.present? ? image_tag(@post.image_url2, size: "80x80") : '' %>
        </div>

        <% if @post.image_url22.present? %>
          <%= image_tag(@post.image_url22, size: "80x80") %>
        <% end %>

        <% if @post.image_url23.present? %>
          <%= image_tag(@post.image_url23, size: "80x80") %>
        <% end %>

      </div>
      <h2>有利(advantage)</h2>
    </td>
  </tr>

  <tr class="fade-info">
    <td class="recommendation">
      <div class="image">
        <%= @post.image_url1.present? ? image_tag(@post.image_url1, size: "80x80") : '' %>
      </div>
      <h2>おすすめ(PICK)</h2>
    </td>
  </tr>
</main>


<!-- post show.html.erb -->
<ol>

  <% @post.comments.each do |comment| %>

    <li>
      <div class="comment11">

      <%= content_tag :div, class: "comments" do %>
        <!-- 改行文字で区切られた最大10文字の単語に分割し、それぞれをbrタグで連結して表示 -->
        <%=
          simple_format(comment.content.scan(/.{1,10}/).join('<br>').html_safe)
        %>
      <% end %>
      <!-- コメントの投稿者名を表示 -->
      <%= comment.user.name %>
      <!-- 削除フォーム -->
      <%= form_with(model: [@post, comment], local: true, method: :delete, class: 'delete-comment-form') do |f| %>
        <%= f.submit 'Delete', class: 'comment3' %>
      <% end %>
    </li>
  <% end %>
</ol>
</div>
<%= form_with(model: [@post, Comment.new], local: true) do |form| %>
  <!-- コメント欄にはtextareaを使用しています -->
  <%= form.label :content %>
  <%= form.text_area :content, placeholder: 'コメントを入力してください', rows: "6" %>
  <%= form.submit 'コメント投稿' , class: 'comment2'%>
<% end %>




<style>
  /* コメント欄に改行を適用したテキストスタイル */
  .comment-content {
    white-space: pre-wrap; /* 全角文字も含めて改行を設定する */
    word-break: break-word; /* 長いワードでも強制的に改行する */
  }
  .back-link {
    position: fixed;
    bottom: 10px;
    right: 10px;
    color: forestgreen;
    font-size: 20px;
  }
  
@media (max-width: 430px){
     h2 {
   font-size: 20px;
   display: flex;
     }}
     @media (max-width: 430px){
     h2 {
   font-size: 13px;
   display: flex;
     }}
  @media (max-width: 555px){
     img {
    width: 50px;
    height: 50px;
     }}
     @media (max-width: 555px){
     .comment1 {
      display: flex;
    flex-direction: column;
    align-items: flex-end;
    paddiNg: 5px;
    transform: translate(-3px,-21px);
}
     }
     
     .user_name{
  color: blue;
}

main{
  display: flex;
  flex-direction: column-reverse;
}
.comment1{
  display: flex;
    flex-direction: column;
    align-items: flex-end;
    paddiNg: 5px;
    transform: translate(6px,-5px)

  }
  .comment2{
  background-color: coral;
  width: 50%;
 
  /* 10文字で改行する */
  word-break: break-all;
  word-wrap: break-word;
 
}

  

.comment3{
  width: 45%;
background-color: rgb(54, 205, 205);
}

.btn1{
  font-size: 10px;
}

.comment {
width: 20%;
background-color: rgb(0, 208, 152);
}
p {
  word-wrap: break-word;
}
p {
  overflow-wrap: break-word;
}
.div1{
  flex-direction: column;
    align-items: flex-end;
  
}
.form_1 {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    position: relative;
}
form{
  display: flex;
    flex-direction: column;
}
.comment11 {
  width: 50%;
  border: solid 1px rgb(38, 72, 86);
}

main{ 
   background-color: rgb(202, 255, 255);
  }
 
ol {
  background-image: linear-gradient(45deg, rgb(255, 167, 167) 35%, transparent 35%, transparent 65%, rgba(0, 47, 255, 0.2) 65%);
}

p{
  color: rgb(0, 0, 0);
}
button{
  background-color: rgb(255, 189, 189);
}
.ui {
  background-image: linear-gradient(45deg, rgb(255, 167, 167) 35%, transparent 35%, transparent 65%, rgba(0, 47, 255, 0.2) 65%);

}
</style>

